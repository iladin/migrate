2005-06-09  Roger While <simrw@sim-basis.de>

	* call.c : Fix memory leak in drop function.

2005-06-01  Roger While <simrw@sim-basis.de>

	* Makefile*, fileio.c, common.c : Hacks for MinGW
	  move.c : Include math.h

2005-05-31  Roger While <simrw@sim-basis.de>

	* common.h, common.c, numeric.c, move.c, termio.c :
	    Rough implementation of COMP-1/2 fields.

2005-05-27  Roger While <simrw@sim-basis.de>

	* byteswap.h : u_int16_t etc. are not necessarily defined
	  in sys/types.h (eg. MinGW). So ifndef on __BIT_TYPES_DEFINED__
	  and typedef them.
	  fileio.c : Cater for extended DB headers db4/ db4.1/ db4.2/ db4.3/

2005-05-23  Roger While <simrw@sim-basis.de>

	* call.h, call.c : New functions cob_resolve_1
			   cob_call_resolve_1.
			   These are wrappers for optimized dynamic
			   calls.

2005-05-21  Roger While <simrw@sim-basis.de>

	* call.h, call.c : Cater for call.def
			   Cater for --with-dl
			   Restructure code slightly
			   Take out check for cob_initialized

2005-05-03  Roger While <simrw@sim-basis.de>

	* Mak* :      Due to autoreconf
	  common.c :  Slight restructure.
		      cob_exp10 must be int not long.
	  common.h :  extern definitions. 
	  fileio.c :  Force SORT to put duplicates in order.
	  move.c :    Performance.
	  numeric.c : Remove unused function.
		      Change long to int (64-bitters where long = 8 bytes).

2005-04-15  Keisuke Nishida  <knishida@open-cobol.org>

	* Makefile.am (libcob_la_CFLAGS): Add -fsigned-char.

2005-04-13  Keisuke Nishida  <knishida@open-cobol.org>

	* byteswap.h: #include <sys/types.h>.  Use u_int16_t, u_int32_t, and
	u_int64_t instead of unsigned short, etc.

2005-03-03  Roger While <simrw@sim-basis.de>

	* fileio.h, fileio.c :
	  LINAGE

2005-02-11  Roger While <simrw@sim-basis.de>

	* common.h, common.c, termio.c :
	  Reorder struct cob_module.
	  Fixes for ARGUMENT-VALUE/NUMBER -
	  discovered by Franklin Ankum.
	  Fix possible too small buffer.

2005-02-09  Roger While <simrw@sim-basis.de>

	* I must be going senile. Finally fix
	  cob_external_addr.

2005-02-08  Roger While <simrw@sim-basis.de>

	* Fix my cob_external_addr routine

2005-02-07  Roger While <simrw@sim-basis.de>

	* common.h, common.c : new routine cob_external_addr
	  Dynamically cater for EXTERNAL items at runtime

2005-02-04  Roger While <simrw@sim-basis.de>

	* termio.h, termio.c :
	  implement DISPLAY .. UPON ENVIRONMENT-VALUE
	  implement DISPLAY .. UPON ARGUMENT-NUMBER
	  implement ACCEPT .. FROM ARGUMENT-NUMBER
	  implement ACCEPT .. FROM ARGUMENT-VALUE

2005-01-07  Roger While <simrw@sim-basis.de>

	* move.c : Fix incorrect truncation when !binary_trunc
	  and moving binary to packed or edited fields
	* numeric.c : Fix arithmetic with numeric display
	  fields when !binary_trunc

2004-11-19  Roger While <simrw@sim-basis.de>

	* move.c : Fix incorrect truncation when !binary_trunc

2004-11-05  Roger While <simrw@sim-basis.de>

	* numeric.c : Handle arithmetic for !binary_trunc.

2004-11-04  Roger While <simrw@sim-basis.de>

	* move.c : Fix regression for NIST suite

2004-11-04  Bernard Giroud <bgiroud@open-cobol.org>
	* numeric.c (cob_decimal_get_binary) : reverted:
	  NIST test suite is no mre working.

2004-11-02  Bernard Giroud <bgiroud@open-cobol.org>
	* numeric.c (cob_decimal_get_binary) :
	  Worked around what I consider a bug in Gmp for getting
	  a long signed value.
	* Added checks for option binary-truncate from a
	  suggestion of Roger While.

2004-10-31  Roger While <simrw@sim-basis.de>

	* fileio.h : For I/O exceptions, has_status flag and slight
	  rearrangement of fields in cob_file structure.

2004-10-30  Roger While <simrw@sim-basis.de>

	* call.c, common.c, move.c : Replace back-tick "`" with 
	  quote "'"
	* move.c : Fix to handle PIC ***B***B**9.
	* byteswap.h : Always generate optimum code, not just with -O
	* fileio.c : Tidy up file error messages.
	  In the ENOENT return for OPEN OUTPUT/EXTEND, return status 30.
	  Note this will not have any effect until we activate error
	  handling for the OPEN. (Coming up soon)

2004-09-17  Keisuke Nishida  <knishida@open-cobol.org>

	* numeric.h (COB_STORE_TRUNC_ON_OVERFLOW): Define as 0x04, not 0x02.
	(Thanks to Roger While)
	
2004-07-06  Keisuke Nishida  <knishida@open-cobol.org>

	* numeric.h (COB_STORE_ROUND, COB_STORE_KEEP_ON_OVERFLOW) 
	(COB_STORE_TRUNC_ON_OVERFLOW): New macros.
	* numeric.h, numeric.c (cob_decimal_get_display) 
	(cob_decimal_get_binary, cob_decimal_get_field, cob_add, cob_sub)
	(cob_div_quotient, cob_div_remainder): New arg `opt'.
	* numeric.c (cob_decimal_get_field_round): Removed.
	Integrated into `cob_decimal_get_field'.
	(cob_display_add_int): Renamed from cob_add_int_to_display.
	(cob_add_round, cob_sub_round): Removed.

2004-07-05  Keisuke Nishida  <knishida@open-cobol.org>

	* fileio.c (sort_read): Set field size for varying records.
	(Thanks to Roger While!)

2004-06-12  Keisuke Nishida  <knishida@open-cobol.org>

	* termio.c (display): Display full digits of binary item
	when pretty-display is off, not when binary-truncate is off.

2004-05-21  Keisuke Nishida  <knishida@open-cobol.org>

	* move.c (cob_binary_get_int64): Reimplemented using memcpy.
	(cob_binary_get_int): Call cob_binary_get_int64.
	(cob_binary_set_int): Call cob_binary_set_int64.

2004-05-16  Keisuke Nishida  <knishida@open-cobol.org>

	* common.c (cob_cmp): Compare non-display numeric and alphanumeric
	correctly.

2004-05-04  Keisuke Nishida  <knishida@open-cobol.org>

	* termio.c (display_numeric): Leading sign for binary.

2004-05-04  Keisuke Nishida  <knishida@open-cobol.org>

	* byteswap.h (COB_BSWAP_32_IA32): Always use bswap.
	(We no longer support i386.)

2004-05-04  Keisuke Nishida  <knishida@open-cobol.org>

	* fileio.c (cob_default_error_handle): Set error for status 35.

2004-05-04  Keisuke Nishida  <knishida@open-cobol.org>

	* common.c (cob_runtime_error): Flush buffer at the end.

2004-04-07  Keisuke Nishida  <knishida@open-cobol.org>

	* common.h, common.c (cob_table_sort_init, cob_table_sort_init_key)
	(cob_table_sort): New functions.

2004-04-07  Keisuke Nishida  <knishida@open-cobol.org>

	* strings.c (cob_inspect_converting): Do not convert repeatedly.
	(Thanks to Richard Smith <rich@theforest.plus.com>)

2004-03-12  Keisuke Nishida  <knishida@wind.sannet.ne.jp>

	* screenio.c: #include <ncurses.h>

2004-03-12  Keisuke Nishida  <knishida@wind.sannet.ne.jp>

	* fileio.c (file_close): FILE *fp = f->file;

2004-03-10  Keisuke Nishida  <knishida@wind.sannet.ne.jp>

	* fileio.c (cob_sort_init): Use temporary sort file.
	(cob_sort_finish): Delete sort file.
	(cob_open): No filename mapping for SORT files.

2004-03-09  Keisuke Nishida  <knishida@wind.sannet.ne.jp>

	* move.c (cob_binary_set_int, cob_binary_set_int64): Reimplemented.
	(Thanks to Roger While)

2004-03-06  Keisuke Nishida  <knishida@wind.sannet.ne.jp>

	* fileio.c (file_open): Open files in the text mode for line
	sequential files.

2004-03-06  Keisuke Nishida  <knishida@wind.sannet.ne.jp>

	* fileio.c (file_open, file_close): Use fcntl for file locking.

2003-10-01  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* common.h (cob_module): New member `flag_pretty_display'.
	* termio.c (display): Updated.

2003-09-29  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* common.c (cob_is_numeric): Test packed decimal.

2003-08-30  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* common.h (cob_module): Replace `flag_binary_print_full' by
	`flag_binary_truncate'.  Related functions updated.

2003-08-29  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* termio.h (COB_SYSIN, COB_SYSOUT, COB_SYSERR): Removed.
	* termio.h, termio.c (cob_display_error): New function.
	(cob_newline_error): New function.

2003-08-27  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* fileio.c: Compile indexed and sort i/o only when either of
	HAVE_DBOPEN or WITH_DB is defined.

2003-08-26  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* common.h (cob_module): New member `flag_filename_mapping'.
	* fileio.c (cob_open): filename mapping.

2003-08-26  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* common.h, common.c (cob_a2e, cob_e2a): New variables.

2003-08-25  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* fileio.c (sort_read): Bug fix of first read.

2003-08-25  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* fileio.h, fileio.c (cob_sort_init): 3rd argument `sequence'.
	(cob_sort_finish): New function.

2003-08-22  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* Don't use run-time config file.
	* common.h, common.c (cob_config_lookup, cob_config_compare): Removed.
	* call.c (cob_init_call): Handle env "COB_DYNAMIC_RELOADING".

2003-08-21  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* common.h (cob_module): New member `flag_binary_print_full'.
	* termio.c (cob_display): Binary full print.

2003-08-21  Keisuke Nishida  <kxn30@yahoo.co.jp>

	* common.h (cob_display_sign): New enum.
	(cob_module): New entry `display_sign'.
	* common.c (cob_real_get_sign, cob_real_put_sign): Check display_sign.

2003-08-19  Keisuke Nishida  <knishida@netlab.jp>

	* termio.c (cob_accept_command_line): Omit the program name (argv[0]).

2003-08-17  Keisuke Nishida  <knishida@netlab.jp>

	* termio.h, termio.c (cob_display_environment): New function.
	(cob_accept_environment): Remove the second argument.

2003-08-12  Keisuke Nishida  <knishida@netlab.jp>

	* byteswap.h: New file.
	* byteorder.h: Removed.

2003-08-12  Keisuke Nishida  <knishida@netlab.jp>

	* common.h, common.c (cob_return_code): Removed.

2003-08-10  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (COB_FLAG_BINARY_SWAP): New macro.
	* move.h, move.c (cob_binary_get_int): New function.
	(cob_binary_get_int64): New function.
	(cob_binary_set_int): New function.
	(cob_binary_set_int64): New function.
	* common.h (COB_TYPE_NUMERIC_NATIVE): Removed.
	* common.h, common.c (cob_binary_convert): Removed.
	* move.c (cob_move_display_to_native): Removed.
	(cob_move_native_to_display): Removed.
	* numeric.c (cob_decimal_set_native): Removed.
	(cob_decimal_get_native): Removed.

2003-08-09  Keisuke Nishida  <knishida@netlab.jp>

	* call.c (cob_call_error): Exit with status 1.

2003-08-07  Keisuke Nishida  <knishida@netlab.jp>

	* byteorder.h: New file.
	* common.h (COB_TYPE_NUMERIC_NATIVE): New macro.
	* common.h, common.c (cob_binary_convert): New function.
	* move.c (cob_move_display_to_native): New function.
	(cob_move_native_to_display): New function.
	* numeric.c (cob_decimal_set_native): New function.
	(cob_decimal_get_native): New function.

2003-08-05  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (COB_WRITE_MASK, COB_WRITE_LINES, COB_WRITE_PAGE)
	(COB_WRITE_AFTER, COB_WRITE_BEFORE): New macros.
	* fileio.h, fileio.c (cob_write_page, cob_write_lines): Removed.
	(cob_write): Take third argument.
	* fileio.c (file_write_opt): New function.
	(FILE_WRITE_AFTER, FILE_WRITE_BEFORE): New macros.

2003-07-28  Keisuke Nishida  <knishida@netlab.jp>

	* common.h, common.c (cob_exception): Removed.

2003-06-29  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h, fileio.c (cob_sort_init): Removed the 3rd argument.
	(cob_sort_init_key): New function.

2003-06-28  Keisuke Nishida  <knishida@netlab.jp>

	* common.h, common.c (cob_cmp_result): Removed.

2003-06-25  Keisuke Nishida  <knishida@netlab.jp>

	* termio.c (cob_accept): Do not use readline.

2003-06-19  Keisuke Nishida  <knishida@netlab.jp>

	* common.c, common.h (cob_check_odo): New function.
	(cob_check_subscript_depending): Removed.

2003-06-18  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.c (relative_rewrite): Refer to the relative key unless
	the access mode is sequential.

2003-06-12  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.c (SEEK_INIT): New macro.

2003-06-07  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.c, numeric.h: No longer use gmp.
	(cob_decimal_init, cob_decimal_clear): Removed.

2003-06-07  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_module): New member `collating_sequence'.
	* common.c (CMP): New macro.
	(cmp_char, cmp_all, cmp_alnum): Use CMP.

2003-05-29  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_switch): Removed.
	* common.c (cob_set_switch, cob_get_switch): New function.

2003-05-27  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_module): Renamed from cob_environment.
	(cob_current_module): Renamed from cob_env.
	(cob_module_enter): Renamed from cob_push_environment.
	(cob_module_leave): Renamed from cob_pop_environment.
	(cob_module_init): Removed.
	* call.c (cob_resolve): Do not call cob_module_init.

2003-05-20  Keisuke Nishida  <knishida@netlab.jp>

	* strings.c (cob_string_delimited): New function.
	(cob_string_append): Take only one argument.

2003-05-18  Keisuke Nishida  <knishida@netlab.jp>

	* common.c (ding_on_error): Removed.

2003-05-18  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.c: Large file system support.
	(_LFS64_LARGEFILE) [WITH_LFS64]: Defined.
	(_LFS64_STDIO) [WITH_LFS64]: Defined.
	(_FILE_OFFSET_BITS) [WITH_LFS64]: Defined.
	(_LARGEFILE64_SOURCE) [WITH_LFS64]: Defined.

2003-05-18  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_d2i, cob_i2d): New macros.

2003-05-15  Keisuke Nishida  <knishida@netlab.jp>

	* move.c (COPY_COMMON_REGION): Removed.
	(store_common_region): New function.
	(cob_display_to_int): New function.
	(cob_binary_to_int): New function.
	(cob_get_int): Optimized.

2003-05-13  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.c (INITIAL_FLAGS): Set to O_BINARY when _WIN32 is defined
	rather than __MINGW32__.
	(file_open): Open in binary mode.
	(cob_open): Make sure that errno == ENOENT after stat.

2003-05-06  Keisuke Nishida  <knishida@netlab.jp>

	* exception.def (COB_EC_ALL): Added.
	* common.h (COB_SET_EXCEPTION): New macro.
	(cob_exception_table): New variable.
	(cob_exception_id): New enum.
	(cob_exception_code): Removed.

2003-05-04  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.c: Optimized cob_add_int/cob_sub_int for DISPLAY.
	(digit_table): New variable.
	(init_digit_table): New function.
	(display_add_int, display_sub_int): New functions.
	(cob_add_int_to_display): New function.
	(cob_add_int): Call `cob_add_int_to_display'.
	(cob_sub_int): Call `cob_add_int'.
	(Thanks to David Korn <dgk@research.att.com>)

2003-05-04  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_get_sign, cob_put_sign): Redefined as macros.
	* common.c (cob_real_get_sign, cob_real_put_sign): Called from
	the above macros.

2003-05-03  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (COB_OPEN_NONE, COB_OPEN_LOCKED): New macros.
	(COB_CLOSE_REEL, COB_CLOSE_REEL_REMOVAL): Removed.
	(COB_FILE_CLOSED_WITH_LOCK): New macro.
	* fileio.c (sequential_close): Close with lock.
	(sequential_open): Seek to the end for extend file.
	(cob_open): Return COB_FILE_CLOSED_WITH_LOCK when file is locked.

2003-05-03  Keisuke Nishida  <knishida@netlab.jp>

	* common.h, common.c (cob_linage_counter): New variable.

2003-04-26  Keisuke Nishida  <knishida@netlab.jp>

	* common.h, common.c (cob_uint_attr, cob_sint_attr): Removed.
	(cob_ubin_attr, cob_sbin_attr): Removed.
	* move.c: Do not use them.

2003-04-03  Keisuke Nishida  <knishida@netlab.jp>

	* move.c (cob_get_int): Renamed from cob_to_int.

2003-03-30  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.c (cob_decimal_set_int): Remove the 3rd argument `decimals'.
	(cob_decimal_set_int64): Removed.

2003-03-25  Keisuke Nishida  <knishida@netlab.jp>

	* exception.def: New file.

2003-03-06  Keisuke Nishida  <knishida@netlab.jp>

	* common.c (cob_field_to_string): Search for ' ' from backward.

2003-02-25  Keisuke Nishida  <knishida@netlab.jp>

	* common.c (cob_push_environment, cob_pop_environment): New functions.

2003-01-23  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (cob_file): Break out flags.
	* fileio.c: Updated.

	* fileio.h, fileio.c (cob_dummy_status): Removed.
	* fileio.c (save_status): Check file_status before setting status.

2003-01-20  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (COB_FLAG_HAVE_SIGN): New macro.
	(COB_FLAG_SIGN_SEPARATE): New macro.
	(COB_FLAG_SIGN_LEADING): New macro.
	(COB_FLAG_BLANK_ZERO): New macro.
	(COB_FLAG_JUSTFIED): New macro.
	(COB_FIELD_HAVE_SIGN): New macro.
	(COB_FIELD_SIGN_SEPARATE): New macro.
	(COB_FIELD_SIGN_LEADING): New macro.
	(COB_FIELD_BLANK_ZERO): New macro.
	(COB_FIELD_JUSTIFIED): New macro.
	(cob_field_attr): Remove members `have_sign', `sign_separate',
	`sign_leading', `blank_zero', and `justified'.  New member
	`flags'.  All files updated.

2003-01-20  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.h (cob_decimal): Rename `number' to `data'.

2003-01-15  Keisuke Nishida  <knishida@netlab.jp>

	* move.c (cob_move_all): New function.
	(cob_move): Call cob_move_all.

2002-12-10  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_environment, cob_env): New.
	(cob_decimal_point, cob_currency_symbol, cob_numeric_separator):
	Replaced by cob_env.  All files updated.
	* common.c (cob_decimal_point, cob_currency_symbol): Removed.

2002-12-05  Keisuke Nishida  <knishida@netlab.jp>

	* common.c (cob_index, cob_index_depending): Exit when index is
	out of range.

2002-11-25  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.c (cob_decimal_get, cob_decimal_get_r): Copy decimal
	before modifying it.

2002-11-25  Keisuke Nishida  <knishida@netlab.jp>

	* strings.h (cob_inspect_init): Take second argument `replacing'.
	(cob_inspect_characters): New function.
	(cob_inspect_all): New function.
	(cob_inspect_leading): New function.
	(cob_inspect_first): New function.

2002-11-25  Keisuke Nishida  <knishida@netlab.jp>

	* common.h, common.c (cob_cmp_int): New function.

2002-11-24  Keisuke Nishida  <knishida@netlab.jp>

	* move.h, move.c (cob_memcpy): Renamed from cob_mem_move.

	* fileio.h (COB_ASCENDING, COB_DESCENDING): Moved from common.h.

	* common.h (cob_field_attr): Remove member `all'.
	(COB_TYPE_*): New macros.
	(COB_FIELD_IS_NUMERIC): New macro.

	* numeric.h (cob_d1, cob_d2, cob_d3, cob_d4, cob_dt): Removed.
	(cob_decimal_set_int64): Removed.
	* numeric.h, numeric.c (cob_numeric_cmp): New function.
	* common.c (cob_cmp): Call `cob_numeric_cmp' for numeric comparison.
	* fileio.c (sort_compare): Always call cob_cmp.

2002-11-23  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.h, numeric.c (cob_add_r, cob_sub_r): New functions.
	(cob_decimal_get_r): Renamed from `cob_decimal_get_rounded'.

2002-11-22  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h, fileio.c (cob_sort_init): Take 3 arguments.

2002-11-22  Keisuke Nishida  <knishida@netlab.jp>

	* common.h, common.c (cob_uint_attr, cob_sint_attr): New constants.
	* common.h, common.c (cob_ubin_attr, cob_sbin_attr): New constants.

2002-11-21  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.h, numeric.c (cob_add, cob_sub, cob_add_int, cob_sub_int):
	Don't take parameter `round'.  All caller updated.

2002-11-19  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.c (lineseq_read): Not do anything special with '\0'.

2002-11-19  Keisuke Nishida  <knishida@netlab.jp>

	* strings.h, strings.c: Divide string functions.
	(cob_inspect, cob_string, cob_unstring): Removed.
	(cob_inspect_init): New function.
	(cob_inspect_start): New function.
	(cob_inspect_before): New function.
	(cob_inspect_after): New function.
	(cob_inspect_tallying_characters): New function.
	(cob_inspect_tallying_all): New function.
	(cob_inspect_tallying_leading): New function.
	(cob_inspect_replacing_characters): New function.
	(cob_inspect_replacing_all): New function.
	(cob_inspect_replacing_leading): New function.
	(cob_inspect_replacing_first): New function.
	(cob_inspect_converting): New function.
	(cob_inspect_finish): New function.
	(cob_string_init): New function.
	(cob_string_append): New function.
	(cob_string_finish): New function.
	(cob_unstring_init): New function.
	(cob_unstring_delimited): New function.
	(cob_unstring_init): New function.
	(cob_unstring_tallying): New function.
	(cob_unstring_finish): New function.
	* strings.h (COB_INSPECT_*, COB_STRING_*, COB_UNSTRING_*): Removed.

2002-11-13  Keisuke Nishida  <knishida@netlab.jp>

	* common.h, common.c (cob_all_attr): New variable.
	(cob_just_attr): Renamed from `cob_alnum_justified_attr'.
	(cob_cmp): New function.
	(cob_cmp_zero, cob_cmp_space, cob_cmp_low): Removed.
	(cob_cmp_high, cob_cmp_quote, cob_cmp_field): Removed.
	* common.c (cmp_char): Renamed from `cmp_figurative'.
	(cob_cmp_alnum): Renamed from `cmp_field'.
	* fileio.c (sort_compare): Updated.

2002-11-13  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_status): Removed.
	(cob_error_code): New variable.
	(COB_STATUS_SUCCESS, COB_STATUS_OVERFLOW): Removed.
	(COB_EC_*): New macros.
	All files updated.

	* strings.h (COB_STRING_WITH_POINTER): Removed.
	(COB_UNSTRING_WITH_POINTER): Removed.
	* strings.h, strings.c (cob_string, cob_unstring): Take second
	argument `ptr'.
	* strings.c (set_int, add_int): Removed.

2002-11-11  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (COB_FILE_OUT_OF_KEY_RANGE): New macro.
	* fileio.c (relative_read_next): Use COB_FILE_OUT_OF_KEY_RANGE.
	(cob_default_error_handle): Add COB_FILE_OUT_OF_KEY_RANGE.

2002-11-08  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_field_attr): New member `all'.
	* common.c, common.h (cob_cmp_str, cob_cmp_all): Removed.
	* common.c (cob_cmp_field): Integrate comparison functions.

2002-11-08  Keisuke Nishida  <knishida@netlab.jp>

	* support.h: Removed.
	* Makefile.am: Remove support.h.

2002-11-07  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.c, numeric.h (cob_add_int, cob_sub_int): Do not take
	argument `decimals'.  All callers updated.

2002-10-21  Keisuke Nishida  <knishida@netlab.jp>

	* common.c (cmp_figurative): New function.
	* common.c, common.h (cob_cmp_zero, cob_cmp_space): New functions.
	(cob_cmp_low, cob_cmp_high, cob_cmp_quote): New functions.

2002-10-18  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.h, numeric.c (cob_add_int64, cob_sub_int64): Removed.

2002-10-13  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (cob_file): New member `record', replacing
	`record_size' and `record_data'.
	(cob_file): Rename `record_depending' to `record_size'.
	* fileio.c: Updated.

2002-10-13  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_field_attr, cob_field): New typedef.
	* fileio.h (cob_file_key, cob_file, cob_fileio_funcs): New typedef.
	* numeric.h (cob_decimal): New typedef.
	* screenio.h (cob_screen): New typedef.
	(cob_screen_type, cob_screen_data, cob_screen_position): New typedef.
	* support.h (cob_frame): New typedef.

2002-10-08  Keisuke Nishida  <knishida@netlab.jp>

	* Use `struct cob_field *' instead of `struct cob_field'
	for all function prototypes.  All files updated.
	* common.h (COB_FIELD_IS_VALID): Removed.

	* common.h (cob_field_attr): Renamed from cob_field_desc.
	All files updated.

	* common.c, common.h (cob_group_attr): New variable.
	(cob_alnum_justified_attr): New variable.

	* support.h (cob_ref, cob_ref_rest): Removed.

2002-09-30  Keisuke Nishida  <knishida@netlab.jp>

	* cobconfig.h.in: Removed.

2002-09-29  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (cob_file): Restructured.
	* fileio.c: Updated for new cob_file scheme.
	* fileio.h, fileio.c (cob_sort_init): Renamed from cob_sort_keys.
	* cobconfig.h.in (HAVE_DB1_DB_H, HAVE_DB_H): Removed.

2002-09-24  Keisuke Nishida  <knishida@netlab.jp>

	* support.h: Do not support non-computed-goto jump.
	* cobconfig.h.in: Use AM_CONFIG_HEADER scheme.
	(COB_HAVE_COMPUTED_GOTO): Removed.
	(HAVE_DB1_DB_H, HAVE_DB_H): Added.
	* fileio.h: #include <libcob/cobconfig.h>
	Include <db1/db.h> or <db.h> which exists.

2002-09-23  Keisuke Nishida  <knishida@netlab.jp>

	* strings.c (cob_unstring): Don't use alloca.

2002-09-12  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.h (cob_decimal): Use exponent instead of decimals.
	* numeric.c: Related functions updated.
	
2002-09-12  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.c (sequential_open): Set f->file.fd to 0 on error.

2002-09-06  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h, fileio.c: INDEXED files has been reimplemented using db1.

2002-08-05  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.c (sort_compare): Prototype for db-3.1.x.

2002-08-02  Keisuke Nishida  <knishida@netlab.jp>

	* common.h, common.c (cob_cmp_all): Unify the former cob_cmp_all
	and cob_cmp_all_str.
	* common.c (cmp_internal): New function.
	(cob_cmp_str, cob_cmp_field): Use it.

2002-08-01  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (COB_ORG_SORT, COB_ORG_MAX): New macros.
	(cob_file): New member `sort_nkeys' and `sort_keys'.
	* fileio.c (sort_file): New variable.
	(sort_compare, sort_open, sort_close, sort_read, sort_write):
	New functions.
	(sort_funcs): New variable.
	(cob_sort_keys, cob_sort_using, cob_sort_giving): New functions.
	(cob_init_fileio): Init sort functions.

2002-08-01  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (COB_ASCENDING, COB_DESCENDING): New macros.

2002-07-31  Keisuke Nishida  <knishida@netlab.jp>

	* common.c (cob_init_config): New function.
	(cob_init): Updated.  Load the config file first.

2002-07-30  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.c (indexed_write_internal): New function.
	(indexed_write, indexed_rewrite): Updated.

2002-07-30  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.c (lineseq_read): Check for EOF.

2002-07-30  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (cob_fileio_funcs): `write' takes only one argument.
	(sequential_write, lineseq_write, relative_write, indexed_write):Ditto.
	(cob_write): Updated.
	
2002-07-30  Keisuke Nishida  <knishida@netlab.jp>

	* screenio.c: Check configuration.

2002-07-24  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.h (cob_decimal): Removed.
	* numeric.c, numeric.h: Relace `cob_decimal' by `struct cob_decimal *'.

2002-07-14  Keisuke Nishida  <knishida@netlab.jp>

	* move.c (cob_set_int): Moved from numeric.c.
	Reimplemented using `cob_move'.

2002-07-13  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.c (cob_decimal_get_double): Bug fix in calculation.
	(cob_decimal_set_double): Take effect of decimal figures.

2002-07-08  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (cob_file): New field `assign'.
	* fileio.c, fileio.h (cob_open): Do not take file name.  Use `assign'.

2002-07-05  Keisuke Nishida  <knishida@netlab.jp>

	* screenio.c, screenio.h (cob_screen_attr): New function.
	* screenio.h (COB_SCREEN_TYPE_ATTRIBUTE): New type.
	(cob_screen_data): New entry `dummy'.

2002-07-05  Keisuke Nishida  <knishida@netlab.jp>

	* fileio.h (cob_file): Renamed from cob_file_desc.
	* fileio.c: Updated.

2002-07-01  Keisuke Nishida  <knishida@netlab.jp>

	* screenio.c, screenio.h: New files.
	* Makefile.am: Add them.

2002-06-17  Keisuke Nishida  <knishida@netlab.jp>

	* call.c (cob_call_resolve): Don't set cob_status.

2002-06-11  Keisuke Nishida  <knishida@netlab.jp>

	* call.c (cob_resolve): Use COB_MODULE_EXT.

2002-06-11  Keisuke Nishida  <knishida@netlab.jp>

	* common.c, common.h (cob_alnum_desc): New variable.
	* common.c (cob_zero, cob_space, cob_high, cob_low, cob_quote): Use it.
	* move.c (cob_mem_move): Use it.

2002-06-11  Keisuke Nishida  <knishida@netlab.jp>

	* Allow cob_field.desc to be NULL.
	* common.h, common.c, move.c, numeric.c: Updated.

2002-06-11  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (COB_FIELD_IS_VALID): New macro.
	* fileio.c, strings.c: Use `COB_FIELD_IS_VALID'.

2002-06-11  Keisuke Nishida  <knishida@netlab.jp>

	* common.h (cob_field): Field `size' moved from `cob_field_desc'.
	(COB_FIELD_SIZE, COB_FIELD_DATA): Removed.
	* common.c, fileio.c, move.c, numeric.c, strings.c, termio.c: Updated.

2002-06-04  Keisuke Nishida  <knishida@netlab.jp>

	* common.c, common.h (cob_config_compare): New function.
	* call.c (cob_init_call): Use `cob_config_compare'.

	* common.c (ding_on_error): New variable.
	(cob_init): Set ding_on_error from option "ding-on-error".
	(cob_runtime_error): Ring a bell only when "ding-on-error" is "yes".

2002-06-04  Keisuke Nishida  <knishida@netlab.jp>

	* support.h (cob_perform): Enclosed by do ... while (0).

2002-06-04  Keisuke Nishida  <knishida@netlab.jp>

	* Makefile.am (libcob_la_CFLAGS): -I$(top_srcdir).
	* call.c, common.c, fileio.c, move.c: Updated.

2002-05-31  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.c, numeric.h (cob_div_remainder): Renamed from
	`cob_div_reminder' (typo fix).

2002-05-31  Keisuke Nishida  <knishida@netlab.jp>

	* common.c, common.h (cob_index, cob_index_depending): Take `name'.
	Display index name with the error message.
	* support.h (COB_INDEX, COB_INDEX_DEPENDING): Take `name'.

2002-05-31  Keisuke Nishida  <knishida@netlab.jp>

	* Makefile.am (libcob_la_DEPENDENCIES): Removed.

2002-05-30  Keisuke Nishida  <knishida@netlab.jp>

	* common.c (cob_check_numeric): Takes the field name as an argument.
	* common.h (cob_field_desc): Remove member `name'.

2002-05-30  Keisuke Nishida  <knishida@netlab.jp>

	* numeric.c (cob_decimal_pow): Handle decimals.
	(cob_decimal_set_double, cob_decimal_get_double): New functions.
	* numeric.h (cob_decimal_set_double, cob_decimal_get_double): Exported.

2002-05-29  Keisuke Nishida  <knishida@netlab.jp>

	* Keep field names at run-time.
	* common.h (cob_field_desc): New member `name'.
	* common.c (cob_check_numeric): Display filed name on error.

	* Makefile.am (libcob_la_DEPENDENCIES): Add defaults.h.

2002-05-29  Keisuke Nishida  <knishida@netlab.jp>

	* termio.c (cob_init_termio): #include <string.h>

2002-05-29  Keisuke Nishida  <knishida@netlab.jp>

	* Support run-time config file: libcob.conf.
	* common.c (config_load, config_insert, cob_config_lookup):
	New functions.
	(cob_init): Call `config_load'.
	* common.h (cob_config_lookup): Declared.

	* call.c (dynamic_reloading): Renamed from cob_dynamic_reloading.
	(cob_init_call): Initialize `dynamic_reloading'.
